<html>

<head>
    <style>
        body {
            margin: 0;
        }
        #overlay {
            position: absolute;
            pointer-events: none;
        }
    </style>
    <script src="https://d3js.org/d3.v4.min.js"></script>
</head>


<body>
    
    <div style="background-color:grey; width:200px; height: 50px; position:absolute; left: 300px; top: 100px;" onclick="alert('hi')"></div>

    <svg id="overlay"></svg>

    <script>
        var svg = d3.select("svg#overlay");

        svg.attr('width', window.innerWidth);
        svg.attr('height', window.innerHeight);

        var color = d3.scaleOrdinal(d3.schemeCategory20);

        var g = svg.append('g');


        var x = d3.scaleLinear()
            .domain([-500, 500])
            .range([0, window.innerWidth]);

        var y = d3.scaleLinear()
            .domain([-500, 500])
            .range([window.innerHeight, 0]);

        var pointer, lastX, lastY;


        var host = 'localhost';

        var ws = new WebSocket('ws://' + host + ':8080');
        ws.onmessage = function (event) {
            event = JSON.parse(event.data);
            switch (event.type) {

            case 'start':
                if (pointer) pointer.remove();
                pointer = g.append('circle')
                    .attr("r", 5)
                    .attr("fill", function (d) {
                        return color(Math.random());
                    });
            case 'point':
                    lastX = x(event.x);
                    lastY = y(event.y);
                pointer.attr("cx", lastX).attr("cy", lastY);
                break;

            case 'end':
                pointer.remove();
                break;
                    
                    
                case 'push':
document.elementFromPoint(lastX, lastY).click();                    
                    break;
            }
            
            
            
            console.log(event);

        };
    </script>
</body>

</html>